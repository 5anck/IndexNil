-- Definir RemoteEvents
local whitelistChangedEvent = Instance.new("RemoteEvent")
whitelistChangedEvent.Name = "WhitelistChangedEvent"
whitelistChangedEvent.Parent = game:GetService("ReplicatedStorage")

local blacklistChangedEvent = Instance.new("RemoteEvent")
blacklistChangedEvent.Name = "BlacklistChangedEvent"
blacklistChangedEvent.Parent = game:GetService("ReplicatedStorage")

-- Listas blanca y negra de usuarios permitidos y bloqueados
local whitelist = {
    "HelloJesus009",
    -- Agrega más nombres de usuario según sea necesario
}

local blacklist = {
    -- Puedes agregar jugadores que desees bloquear de forma permanente
}

-- Función para verificar si un usuario está en la lista blanca
local function isUserInWhitelist(username)
    for _, name in ipairs(whitelist) do
        if name == username then
            return true
        end
    end
    return false
end

-- Función para verificar si un usuario está en la lista negra
local function isUserInBlacklist(username)
    for _, name in ipairs(blacklist) do
        if name == username then
            return true
        end
    end
    return false
end

-- Función para verificar y hacer kick al usuario si corresponde
local function checkAndKickPlayer(player)
    local username = player.Name
    if not isUserInWhitelist(username) or isUserInBlacklist(username) then
        player:Kick("¡No puedes acceder a este juego!")
    end
end

-- Función principal que se ejecutará cada cierto tiempo para verificar los usuarios
local function main()
    -- Obtener todos los jugadores en el juego
    local players = game:GetService("Players"):GetPlayers()
    
    -- Verificar cada jugador
    for _, player in ipairs(players) do
        checkAndKickPlayer(player)
    end
end

-- Ejecutar la función principal inicialmente
main()

-- Definir el intervalo de tiempo para actualizar (en segundos)
local updateTime = 60  -- por ejemplo, actualizar cada 60 segundos

-- Función para ejecutar la función principal cada cierto intervalo de tiempo
local function updateLoop()
    while true do
        wait(updateTime)
        main()
    end
end

-- Iniciar el bucle de actualización en un hilo aparte
coroutine.wrap(updateLoop)()
